{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\irene\\\\ISST-Grupo05\\\\frontend\\\\src\\\\components\\\\Horarios\\\\HorariosEmpleados.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Liner from \"../Interfaces/Liner\";\nimport Card from 'react-bootstrap/Card';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport './Horarios.css';\nimport { LoginContext } from '../../App';\nimport { Container, Col, Row, Button } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HorariosEmpleados = props => {\n  _s();\n  const {\n    idHorario\n  } = useParams(); // Accede a la ID desde props.match.params\n  const [horaEntrada, setHoraEntrada] = useState(\"\");\n  const [fecha, setFecha] = useState(\"\");\n  const [horaSalida, setHoraSalida] = useState(\"\");\n  const [minutosPau, setMinutosPau] = useState(0);\n  const [userLogged, setUserLogged] = useContext(LoginContext);\n  const [startDate, setStartDate] = useState(null);\n  const [endDate, setEndDate] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const idHorarioNumero = parseInt(idHorario, 10);\n  const empleado = props.empleados2.find(empleado => empleado.id === idHorarioNumero);\n  let rec;\n  try {\n    rec = userLogged && JSON.parse(userLogged).rec;\n  } catch (error) {\n    console.log(`Error parsing JSON: ${error}`);\n  }\n  const handleCrearTrabajador = async e => {\n    e.preventDefault();\n    setEndDate(formatDate(endDate));\n    setStartDate(formatDate(startDate));\n    let fechas = getFechasIntermedias(startDate, endDate);\n    for (let i = 0; i < fechas.length; i++) {\n      const nuevoTrabajador = {\n        fecha: fechas[i],\n        horaEntrada: \"00:00:00\",\n        horaSalida: \"00:00:00\",\n        minutosPau: 0,\n        minutosExt: 0,\n        minutosTot: 0\n      };\n      console.log(nuevoTrabajador);\n      const requestOptions = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(nuevoTrabajador)\n      };\n      console.log(requestOptions);\n      const response = await fetch(`http://localhost:8080/empleados/${idHorarioNumero}/horarios`, requestOptions);\n    }\n    window.location.href = `/horarios/${idHorarioNumero}`;\n  };\n  const handleEditarTrabador = async (e, id) => {\n    e.preventDefault();\n    const horarioItem = {\n      fecha,\n      horaEntrada,\n      horaSalida,\n      minutosPau\n    };\n    const requestOptions = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        ...horarioItem\n      })\n    };\n    await fetch(`http://localhost:8080/horarios/${id}`, requestOptions);\n    window.location.href = `/horarios/${idHorarioNumero}`;\n  };\n  function Popup(_ref) {\n    let {\n      onClose\n    } = _ref;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup\",\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        height: \"30vh\",\n        width: \"30vw\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Seleccione las fechas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n          selected: startDate,\n          onChange: date => setStartDate(date),\n          selectsStart: true,\n          startDate: startDate,\n          endDate: endDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n          style: {\n            marginTop: \"2vh\"\n          },\n          selected: endDate,\n          onChange: date => setEndDate(date),\n          selectsEnd: true,\n          startDate: startDate,\n          endDate: endDate,\n          minDate: startDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"funciones\",\n        style: {\n          justifyContent: \"center\",\n          alignContent: \"center\",\n          display: \"flex\",\n          margin: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"btn btn-success\",\n          style: {\n            marginRight: \"1vw\"\n          },\n          onClick: onClose,\n          children: \"A\\xF1adir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"btn btn-danger\",\n          onClick: () => setShowPopup(false),\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this);\n  }\n  function getFechasIntermedias(fechaInicio, fechaFin) {\n    const fechas = [];\n    let fechaActual = new Date(fechaInicio);\n    const fechaFinal = new Date(fechaFin);\n    while (fechaActual <= fechaFinal) {\n      console.log(fechaActual);\n      fechas.push(formatDate(fechaActual));\n      fechaActual.setDate(fechaActual.getDate() + 1);\n      console.log(fechas);\n    }\n    return fechas;\n  }\n  function formatDate(dateString) {\n    const date = new Date(dateString);\n    const year = date.getFullYear();\n    const month = ('0' + (date.getMonth() + 1)).slice(-2);\n    const day = ('0' + date.getDate()).slice(-2);\n    return `${year}-${month}-${day}`;\n  }\n  function convertirFecha(fechaString) {\n    const partesFecha = fechaString.split('-');\n    const fecha = new Date(partesFecha[0], partesFecha[1] - 1, partesFecha[2]);\n    const opcionesFecha = {\n      day: 'numeric',\n      month: 'long',\n      year: 'numeric'\n    };\n    const fechaFormateada = fecha.toLocaleDateString('es-ES', opcionesFecha);\n    return fechaFormateada;\n  }\n  function convertirMinutosAHoras(minutos) {\n    if (minutos < 0) {\n      const horas = Math.floor(-minutos / 60);\n      const minutosRestantes = Math.floor(-minutos % 60);\n      const tiempoFormateado = `-${horas.toString()}h ${minutosRestantes.toString().padStart(2, '0')}min`;\n      return tiempoFormateado;\n    } else {\n      const horas = Math.floor(minutos / 60);\n      const minutosRestantes = Math.floor(minutos % 60);\n      const tiempoFormateado = `${horas.toString()}h ${minutosRestantes.toString().padStart(2, '0')}min`;\n      return tiempoFormateado;\n    }\n  }\n  function convertirFormatoHora(horaCompleta) {\n    const fecha = new Date(`1970-01-01T${horaCompleta}`);\n    const [horas, minutos, segundos] = horaCompleta.split(':');\n    if (horas == 0) {\n      return `00:${minutos}`;\n    } else {\n      return fecha.toLocaleTimeString('en-US', {\n        hour12: false,\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    }\n  }\n  function convertirHoraLong(horaCompleta) {\n    const fecha = new Date(`1970-01-01T${horaCompleta}:00`);\n    const [horas, minutos] = horaCompleta.split(':');\n    if (horas == 0) {\n      return parseInt(minutos);\n    } else {\n      const total = parseInt(horas * 60) + parseInt(minutos);\n      return total;\n    }\n  }\n  function convertirFormatoHoraLong(totalMinutes) {\n    const hours = Math.floor(totalMinutes / 60);\n    const minutes = Math.floor(totalMinutes) % 60;\n    const seconds = 0;\n    if (hours === 0) {\n      return `00:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    } else {\n      return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    }\n  }\n  useEffect(() => {\n    console.log(formatDate(startDate));\n  }, [rec]);\n  if (!empleado) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"contenedor-flexbox\",\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignContent: \"center\",\n        margin: \"auto\"\n      },\n      children: \"Empleado no encontrado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"contenedor-flexbox\",\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignContent: \"center\",\n      margin: \"auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Liner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignContent: \"center\",\n        margin: \"auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"funciones\",\n        style: {\n          justifyContent: \"center\",\n          alignContent: \"center\",\n          display: \"flex\",\n          margin: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: empleado.nombreCompleto\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 17\n        }, this), rec && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-block\",\n          style: {\n            marginLeft: \"1vw\"\n          },\n          onClick: () => setShowPopup(true),\n          children: \"A\\xF1adir horarios\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }, this), showPopup ? /*#__PURE__*/_jsxDEV(Popup, {\n      onClose: e => {\n        setShowPopup(false);\n        handleCrearTrabajador(e);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 23\n    }, this) : /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"productosresultados\",\n        style: {\n          height: \"68vh\",\n          overflowY: \"auto\",\n          overflowX: \"hidden\"\n        },\n        children: empleado.horarios.map((horario, index) => /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-1\",\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex justify-content-center align-items-center mb-2\",\n                    children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                      id: \"cat\\xE1logo\",\n                      children: /*#__PURE__*/_jsxDEV(\"b\", {\n                        children: convertirFecha(horario.fecha)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 236,\n                        columnNumber: 47\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 236,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                    className: \"my-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        marginTop: \"1.2vh\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Entrada: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 240,\n                        columnNumber: 72\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"time\",\n                        style: {\n                          width: 76\n                        },\n                        pattern: \"\\\\d{2}:\\\\d{2}\",\n                        defaultValue: convertirFormatoHora(horario.horaEntrada),\n                        onChange: event => {\n                          setHoraEntrada(event.target.value);\n                          setFecha(horario.fecha);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 240,\n                        columnNumber: 89\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        marginTop: \"1.2vh\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Salida: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 243,\n                        columnNumber: 73\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"time\",\n                        style: {\n                          width: 76\n                        },\n                        pattern: \"\\\\d{2}:\\\\d{2}\",\n                        defaultValue: convertirFormatoHora(horario.horaSalida),\n                        onChange: event => {\n                          setHoraSalida(event.target.value);\n                          setFecha(horario.fecha);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 243,\n                        columnNumber: 89\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 243,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-primary btn-block\",\n                      style: {\n                        marginTop: \"0.8vh\"\n                      },\n                      onClick: e => {\n                        handleEditarTrabador(e, horario.id);\n                      },\n                      children: \"Registrar hora\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                  className: \"my-2\",\n                  style: {\n                    width: \"90%\",\n                    margin: \"auto\",\n                    border: \"none\",\n                    borderTop: \"2px dashed black\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        marginTop: \"1.2vh\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Tiempo Total: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 252,\n                        columnNumber: 72\n                      }, this), convertirMinutosAHoras(horario.minutosTot)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        marginTop: \"1.2vh\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Tiempo Extra: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 255,\n                        columnNumber: 73\n                      }, this), convertirMinutosAHoras(horario.minutosExt)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 255,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        marginTop: \"1.2vh\"\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"Tiempo Pausado: \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 258,\n                        columnNumber: 73\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"time\",\n                        style: {\n                          width: 76\n                        },\n                        pattern: \"\\\\d{2}:\\\\d{2}\",\n                        defaultValue: convertirFormatoHora(convertirFormatoHoraLong(horario.minutosPau)),\n                        onChange: event => {\n                          setMinutosPau(convertirHoraLong(event.target.value));\n                          setFecha(horario.fecha);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 258,\n                        columnNumber: 97\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 258,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 100\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n};\n_s(HorariosEmpleados, \"8C3SWKLEx6w6ETixHHTd7rzsqVU=\", false, function () {\n  return [useParams];\n});\n_c = HorariosEmpleados;\nexport default HorariosEmpleados;\nvar _c;\n$RefreshReg$(_c, \"HorariosEmpleados\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useParams","Liner","Card","DatePicker","LoginContext","Container","Col","Row","Button","jsxDEV","_jsxDEV","HorariosEmpleados","props","_s","idHorario","horaEntrada","setHoraEntrada","fecha","setFecha","horaSalida","setHoraSalida","minutosPau","setMinutosPau","userLogged","setUserLogged","startDate","setStartDate","endDate","setEndDate","showPopup","setShowPopup","idHorarioNumero","parseInt","empleado","empleados2","find","id","rec","JSON","parse","error","console","log","handleCrearTrabajador","e","preventDefault","formatDate","fechas","getFechasIntermedias","i","length","nuevoTrabajador","minutosExt","minutosTot","requestOptions","method","headers","body","stringify","response","fetch","window","location","href","handleEditarTrabador","horarioItem","Popup","_ref","onClose","className","style","display","flexDirection","justifyContent","alignItems","height","width","children","fileName","_jsxFileName","lineNumber","columnNumber","selected","onChange","date","selectsStart","marginTop","selectsEnd","minDate","alignContent","margin","class","marginRight","onClick","fechaInicio","fechaFin","fechaActual","Date","fechaFinal","push","setDate","getDate","dateString","year","getFullYear","month","getMonth","slice","day","convertirFecha","fechaString","partesFecha","split","opcionesFecha","fechaFormateada","toLocaleDateString","convertirMinutosAHoras","minutos","horas","Math","floor","minutosRestantes","tiempoFormateado","toString","padStart","convertirFormatoHora","horaCompleta","segundos","toLocaleTimeString","hour12","hour","minute","convertirHoraLong","total","convertirFormatoHoraLong","totalMinutes","hours","minutes","seconds","nombreCompleto","marginLeft","overflowY","overflowX","horarios","map","horario","index","Body","type","pattern","defaultValue","event","target","value","border","borderTop","_c","$RefreshReg$"],"sources":["C:/Users/irene/ISST-Grupo05/frontend/src/components/Horarios/HorariosEmpleados.jsx"],"sourcesContent":["import React from 'react';\r\nimport {useContext, useEffect, useState} from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport Liner from \"../Interfaces/Liner\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport './Horarios.css';\r\nimport { LoginContext } from '../../App';\r\nimport { Container, Col, Row, Button } from \"react-bootstrap\";\r\n\r\nconst HorariosEmpleados = (props) => {\r\n    const { idHorario } = useParams(); // Accede a la ID desde props.match.params\r\n    const [horaEntrada, setHoraEntrada] = useState(\"\");\r\n    const [fecha, setFecha] = useState(\"\");\r\n    const [horaSalida, setHoraSalida] = useState(\"\");\r\n    const [minutosPau, setMinutosPau] = useState(0);\r\n    const [userLogged, setUserLogged] = useContext(LoginContext);\r\n    const [startDate, setStartDate] = useState(null);\r\n    const [endDate, setEndDate] = useState(null);\r\n    const [showPopup, setShowPopup] = useState(false);\r\n\r\n\r\n    const idHorarioNumero = parseInt(idHorario, 10);\r\n\r\n    const empleado = props.empleados2.find(empleado => empleado.id === idHorarioNumero);\r\n\r\n    let rec;\r\n\r\n    try {\r\n        rec = userLogged && JSON.parse(userLogged).rec; \r\n    } catch (error) {\r\n        console.log(`Error parsing JSON: ${error}`);\r\n    }\r\n\r\n    const handleCrearTrabajador = async (e) => {\r\n        e.preventDefault();\r\n\r\n        setEndDate(formatDate(endDate));\r\n        setStartDate(formatDate(startDate));\r\n        let fechas = getFechasIntermedias(startDate,endDate);\r\n\r\n        for (let i = 0; i< fechas.length; i++) {\r\n\r\n            const nuevoTrabajador = {\r\n            fecha: fechas[i],\r\n            horaEntrada: \"00:00:00\",\r\n            horaSalida: \"00:00:00\",\r\n            minutosPau: 0,\r\n            minutosExt: 0,\r\n            minutosTot: 0\r\n            };\r\n\r\n            console.log(nuevoTrabajador)\r\n        \r\n            const requestOptions = {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(nuevoTrabajador),\r\n            };\r\n            console.log(requestOptions)\r\n        \r\n            const response = await fetch(`http://localhost:8080/empleados/${idHorarioNumero}/horarios`, requestOptions);\r\n        }\r\n        window.location.href = `/horarios/${idHorarioNumero}`\r\n    };\r\n\r\n    const handleEditarTrabador = async (e, id) => {\r\n        e.preventDefault(); \r\n        \r\n\r\n            const horarioItem = {\r\n                fecha,\r\n                horaEntrada,\r\n                horaSalida,\r\n                minutosPau\r\n            };\r\n\r\n            const requestOptions = {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    ...horarioItem\r\n                }),\r\n            };\r\n\r\n            await fetch(`http://localhost:8080/horarios/${id}`, requestOptions);\r\n\r\n            window.location.href = `/horarios/${idHorarioNumero}`\r\n\r\n    };\r\n\r\n    function Popup({ onClose }) {\r\n        return (\r\n            <div className=\"popup\" style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"space-between\", alignItems: \"center\", height: \"30vh\", width: \"30vw\"}}>\r\n                <h2>Seleccione las fechas</h2>\r\n                <div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n                    <DatePicker\r\n                        selected={startDate}\r\n                        onChange={(date) => setStartDate(date)}\r\n                        selectsStart\r\n                        startDate={startDate}\r\n                        endDate={endDate}\r\n                    />\r\n                    <DatePicker\r\n                        style={{ marginTop: \"2vh\" }}\r\n                        selected={endDate}\r\n                        onChange={(date) => setEndDate(date)}\r\n                        selectsEnd\r\n                        startDate={startDate}\r\n                        endDate={endDate}\r\n                        minDate={startDate}\r\n                    />\r\n                </div>\r\n                <div className=\"funciones\" style={{justifyContent: \"center\", alignContent: \"center\", display: \"flex\", margin: 2}}> \r\n                    <button class=\"btn btn-success\" style={{marginRight:\"1vw\"}} onClick={onClose}>Añadir</button>\r\n                    <button class=\"btn btn-danger\" onClick={() => setShowPopup(false)}>Cerrar</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    function getFechasIntermedias(fechaInicio, fechaFin) {\r\n        const fechas = [];\r\n        \r\n        let fechaActual = new Date(fechaInicio);\r\n        const fechaFinal = new Date(fechaFin);\r\n\r\n        \r\n        while (fechaActual <= fechaFinal) {\r\n            console.log(fechaActual)\r\n            fechas.push(formatDate(fechaActual  ));\r\n            fechaActual.setDate(fechaActual.getDate() + 1);\r\n            console.log(fechas);\r\n        }\r\n        \r\n        return fechas;\r\n    }\r\n      \r\n\r\n    function formatDate(dateString) {\r\n        const date = new Date(dateString);\r\n        const year = date.getFullYear();\r\n        const month = ('0' + (date.getMonth() + 1)).slice(-2);\r\n        const day = ('0' + date.getDate()).slice(-2);\r\n        return `${year}-${month}-${day}`;\r\n    }\r\n\r\n    function convertirFecha(fechaString) {\r\n        const partesFecha = fechaString.split('-');\r\n        const fecha = new Date(partesFecha[0], partesFecha[1] - 1, partesFecha[2]);\r\n        const opcionesFecha = { day: 'numeric', month: 'long', year: 'numeric' };\r\n        const fechaFormateada = fecha.toLocaleDateString('es-ES', opcionesFecha);\r\n        return fechaFormateada;\r\n    }\r\n\r\n    function convertirMinutosAHoras(minutos) {\r\n        if (minutos < 0) {\r\n            const horas = Math.floor(-minutos / 60);\r\n            const minutosRestantes = Math.floor(-minutos % 60);\r\n        \r\n            const tiempoFormateado = `-${horas.toString()}h ${minutosRestantes.toString().padStart(2, '0')}min`;\r\n            return tiempoFormateado;\r\n\r\n        } else {\r\n            const horas = Math.floor(minutos / 60);\r\n            const minutosRestantes = Math.floor(minutos % 60);\r\n        \r\n            const tiempoFormateado = `${horas.toString()}h ${minutosRestantes.toString().padStart(2, '0')}min`;\r\n            return tiempoFormateado;\r\n        }\r\n    }\r\n\r\n    function convertirFormatoHora(horaCompleta) {\r\n        const fecha = new Date(`1970-01-01T${horaCompleta}`);\r\n        const [horas, minutos, segundos] = horaCompleta.split(':');\r\n        if (horas == 0) {\r\n            return `00:${minutos}`;\r\n        } else {\r\n            return fecha.toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute:'2-digit'});\r\n        }\r\n    }   \r\n\r\n    function convertirHoraLong(horaCompleta) {\r\n        const fecha = new Date(`1970-01-01T${horaCompleta}:00`);\r\n        const [horas, minutos] = horaCompleta.split(':');\r\n        if (horas == 0) {\r\n            return parseInt(minutos);\r\n        } else {\r\n            const total =  parseInt(horas*60) + parseInt(minutos)\r\n            return total;\r\n        }\r\n    }\r\n\r\n    function convertirFormatoHoraLong(totalMinutes) {\r\n        const hours = Math.floor(totalMinutes / 60);\r\n        const minutes = Math.floor(totalMinutes) % 60;\r\n        const seconds = 0;\r\n      \r\n        if (hours === 0) {\r\n          return `00:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n        } else {\r\n          return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n        }\r\n      }\r\n    \r\n    useEffect(() =>{\r\n        console.log(formatDate(startDate))\r\n    }, [rec]);\r\n      \r\n\r\n    if (!empleado) {\r\n        return <div class=\"contenedor-flexbox\" style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignContent: \"center\", margin: \"auto\"}}>Empleado no encontrado</div>;\r\n      }\r\n\r\n    return (\r\n    <div class=\"contenedor-flexbox\" style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignContent: \"center\", margin: \"auto\"}}>\r\n        <Row>\r\n            <Liner/>\r\n        </Row>\r\n        <Row style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignContent: \"center\", margin: \"auto\"}}>\r\n            <div className=\"funciones\" style={{justifyContent: \"center\", alignContent: \"center\", display: \"flex\", margin: 2}}>      \r\n                <h2><b>{empleado.nombreCompleto}</b></h2> \r\n                {rec && <button className=\"btn btn-primary btn-block\" style= {{marginLeft:\"1vw\"}} onClick={() => setShowPopup(true)}>Añadir horarios</button>}\r\n            </div>\r\n        </Row>\r\n        { showPopup ? <Popup onClose={(e) => {setShowPopup(false); handleCrearTrabajador(e) }}/> : <Row>\r\n            <div id=\"productosresultados\" style={{ height: \"68vh\", overflowY: \"auto\", overflowX: \"hidden\" }}>\r\n            {empleado.horarios.map((horario, index) => (\r\n                <Col  key={index}>\r\n                <div className=\"my-1\">\r\n                    <Card>\r\n                    <Card.Body>\r\n                        <div class=\"row\">\r\n                            <div className=\"d-flex justify-content-center align-items-center mb-2\">\r\n                            <h3 id=\"catálogo\"><b>{convertirFecha(horario.fecha)}</b></h3>\r\n                            </div>\r\n                                <hr className=\"my-2\" />\r\n                                <div className=\"col-4\">\r\n                                        <p style={{marginTop:\"1.2vh\"}}><b>Entrada: </b>{<input type='time' style={{width:76}} pattern=\"\\d{2}:\\d{2}\" defaultValue={convertirFormatoHora(horario.horaEntrada)} onChange={(event) => {setHoraEntrada(event.target.value); setFecha(horario.fecha)}}/>}</p>\r\n                                </div>\r\n                                <div className=\"col-4\">\r\n                                        <p style={{marginTop:\"1.2vh\"}} ><b>Salida: </b>{<input type='time' style={{width:76}} pattern=\"\\d{2}:\\d{2}\" defaultValue={convertirFormatoHora(horario.horaSalida)} onChange={(event) => {setHoraSalida(event.target.value); setFecha(horario.fecha)}}/>}</p>\r\n                                </div>\r\n                                <div className=\"col-4\">\r\n                                    <button className=\"btn btn-primary btn-block\" style={{marginTop:\"0.8vh\"}} onClick={(e) => {handleEditarTrabador(e, horario.id)}}>Registrar hora</button>\r\n                                </div>\r\n                            </div>\r\n                        <hr className=\"my-2\" style={{width:\"90%\", margin:\"auto\", border: \"none\", borderTop: \"2px dashed black\"}}/>\r\n                            <div class=\"row\">\r\n                                <div className=\"col-4\">\r\n                                        <p style={{marginTop:\"1.2vh\"}}><b>Tiempo Total: </b>{convertirMinutosAHoras(horario.minutosTot)}</p>\r\n                                </div>\r\n                                <div className=\"col-4\">\r\n                                        <p style={{marginTop:\"1.2vh\"}} ><b>Tiempo Extra: </b>{convertirMinutosAHoras(horario.minutosExt)}</p>                                \r\n                                </div>\r\n                                <div className=\"col-4\">\r\n                                        <p style={{marginTop:\"1.2vh\"}} ><b>Tiempo Pausado: </b>{<input type='time' style={{width:76}} pattern=\"\\d{2}:\\d{2}\" defaultValue={convertirFormatoHora(convertirFormatoHoraLong(horario.minutosPau))} onChange={(event) => {setMinutosPau(convertirHoraLong(event.target.value)); setFecha(horario.fecha)}}/>}</p>\r\n\r\n                                </div>\r\n                            </div>\r\n                    </Card.Body> \r\n                    </Card>\r\n                </div>\r\n                </Col>\r\n            ))}\r\n            </div>\r\n        </Row>}\r\n    </div>\r\n    )\r\n\r\n}\r\n\r\nexport default HorariosEmpleados;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}